var t=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function e(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length,i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*r));return e}var n,r=location.pathname.replace(/\/$/s,"")+"/formField",i=localStorage.getItem(r.toString()),o=n=i?JSON.parse(i):[],a=e(5),s=new Function("try {return this===window;}catch(e){ return false;}"),u=-1;if("undefined"==typeof Storage)var c=function(){};var l=function(e){function n(t){void 0===t&&(t="");var n=e.call(this)||this;return n.prefix="",n.prefix=t,n}return t(n,e),n.prototype.has=function(t){return!!localStorage[this.prefix+t]&&!!localStorage[this.prefix+t].length},n.prototype.get=function(t){if(!this.has(this.prefix+t))return!1;var e=localStorage[this.prefix+t];try{return JSON.parse(e)}catch(t){return e}},n.prototype.set=function(t,e){try{localStorage.setItem(this.prefix+t,JSON.stringify(e))}catch(n){localStorage.setItem(this.prefix+t,e)}},n.prototype.extend=function(t,e){if(this.has(this.prefix+t)){var n=this.get(this.prefix+t);"undefined"!=typeof jQuery&&$.extend(n,JSON.parse(JSON.stringify(e))),this.set(this.prefix+t,n)}else this.set(this.prefix+t,e)},n.prototype.remove=function(t){localStorage.removeItem(this.prefix+t)},n}(Storage),f=function(){function t(){}return t.set=function(t,e){("object"==typeof e||Array.isArray(e))&&(e=JSON.stringify(e)),"string"!=typeof e&&(e=new String(e)),localStorage.setItem(t,e)},t.get=function(t,e){var n=localStorage.getItem(t);return this.IsJsonString(n)&&(n=JSON.parse(n)),null!=n?n:e},t.IsJsonString=function(t){if(null==t)return!1;try{JSON.parse(t)}catch(t){return!1}return!0},t}(),g=function(){function t(e,n){"object"!=typeof n&&(n={}),void 0===(n=Object.assign({debug:!1,method:"vanilla"},n)).debug&&(n.debug=!1,console.log("change debug to false")),t.restore(e,n.debug),"jquery"==n.method&&t.is_jquery()?t.jquery_listener():(console.log("vanilla listener started"),t.vanilla_listener(e,(function(){console.log(arguments),t.save(e,n.debug)})))}return t.offset=function(t){return t.getBoundingClientRect()},t.jquery_listener=function(){$(document).bind("DOMNodeInserted",(function(){switch($(this).prop("tagName")){case"SELECT":case"INPUT":case"TEXTAREA":t.restore($(this).get(0))}})),$(document).bind("DOMNodeRemoved",(function(){var t=$(this);if(!t.attr("no-save")&&t.attr("formsaver-integrity"))switch(t.prop("tagName")){case"SELECT":case"INPUT":case"TEXTAREA":t.off("change")}})),$(document).on("change","select, input, textarea",(function(e){t.save(this)})),$(document).on("focus","input,textarea,select",(function(){var t=$(this);t.getIDName();var e=t.attr("formsaver-integrity");e&&e!=a&&(console.log("aria id invalid"),t.smartForm(),t.attr("formsaver-integrity",a))}))},t.vanilla_listener=function(t,e){t.addEventListener?t.addEventListener("change",e):t.attachEvent&&t.attachEvent("onchange",e)},t.hasAttribute=function(t,e){return 1===t.nodeType&&t.hasAttribute(e)},t.convertElement=function(t){this.is_jquery()&&t instanceof jQuery&&(t=t.get(0));t.nodeType;return t},t.restore=function(t,e){if(void 0===e&&(e=!1),t=this.convertElement(t),u++,!t.hasAttribute("no-save")){var n;t.setAttribute("formsaver-integrity",a);var r=this.get_identifier(t),i=t.getAttribute("type");if(r.length>0){if("checkbox"===i){if(null===(n=JSON.parse(localStorage.getItem(r))))return;return e&&console.log("restore value checkbox["+r+"] "+n),void(t.checked=n)}if("radio"===i){var o=localStorage.getItem(r);f.IsJsonString(o)&&(o=JSON.parse(o));for(var s=document.getElementsByName(t.getAttribute("name")),c=0;c<s.length;c++)s[c].checked=!1;return void setTimeout((function(){o&&"object"==typeof o&&o.hasOwnProperty("index")&&(s[o.index].checked=!0,e&&console.log("restoring checkbox",o))}),1e3)}if(null===(n=localStorage.getItem(r))||!n.toString().length)return;t.value=n,this.is_select2(t)&&(console.log("restoring "+t.getAttribute("id")+" which Initialized select2"),$(t).val(n).trigger("change"))}}},t.save=function(e,n){void 0===n&&(n=!1),e=this.convertElement(e);var r=this.get_identifier(e),i=e.value,o=!e.hasAttribute("no-save")&&e.hasAttribute("formsaver-integrity")&&e.hasAttribute("name");if(n&&console.log(e.tagName+" "+r+" "+o),r&&""!==i&&o){if("checkbox"==e.getAttribute("type"))return localStorage.setItem(r,(1==e.checked).toString()),void(n&&console.log("save checkbox button ",t.offset(e)));if("radio"==e.getAttribute("type")){for(var a=document.getElementsByName(e.getAttribute("name")),s=d(a),u=0;u<a.length;u++)if(a.hasOwnProperty(u)){var c=a[u];this.delete(c,n)}return void setTimeout((function(){localStorage.setItem(r,JSON.stringify(s)),n&&console.log("save radio button ",s)}),1e3)}localStorage.setItem(r,i.toString())}},t.delete=function(t,e){void 0===e&&(e=!1),t=this.convertElement(t);var n=this.get_identifier(t);e&&console.log("deleting "+n),localStorage.removeItem(n)},t.is_select2=function(t){return this.is_jquery()&&$(t).data("select2")},t.is_jquery=function(){return"undefined"!=typeof jQuery},t.get_identifier=function(t){var n=function(n){var i;return u in o?(i=o[u],t.setAttribute(n,i)):(i=e(5),t.setAttribute(n,i),o[u]=i,localStorage.setItem(r.toString(),JSON.stringify(o))),u++,i},i=function(n){var i=e(5);return t.setAttribute(n,i),o[u]=i,localStorage.setItem(r.toString(),JSON.stringify(o)),i},a=null,s=null;return(t=this.convertElement(t)).hasAttribute("id")?"null"==t.getAttribute("id")&&(s=i("id")):a=n("id"),t.hasAttribute("name")?"null"==t.getAttribute("name")&&("string"!=typeof s?i("name"):t.setAttribute("name",s)):"string"!=typeof a?n("name"):t.setAttribute("name",a),location.pathname+t.getAttribute("id")},t}();function d(t){for(var e={},n=0,r=t.length;n<r;n++)t[n].checked&&(e={value:t[n].value,index:n,id:g.get_identifier(t[n])});return e}function h(t){if(void 0===t&&(t=!1),"undefined"!=typeof jQuery)t&&console.log("starting form saver with jQuery debug("+t+")"),"undefined"!=typeof jQuery&&jQuery("input,textarea,select").each((function(e,n){new g(this,{debug:t,method:"jquery"})}));else{t&&console.log("starting form saver without jQuery debug("+t+")");var e=document.querySelectorAll("input,textarea,select");t&&console.log(e),e.forEach((function(e,n,r){new g(e,{debug:t,method:"vanilla"})}))}}s()&&"undefined"!=typeof jQuery&&function(t){t.fn.getIDName=function(){return t(this).attr("aria-autovalue")&&t(this).val(a).trigger("change"),g.get_identifier(this)},t.fn.has_attr=function(e){var n=t(this).attr(e);return void 0!==n&&!1!==n},t.fn.smartForm=function(){u++,new g(t(this).get(0))},t.arrive=function(e,n){e?t(e).bind("DOMNodeInserted",n):"function"==typeof n?t(document).bind("DOMNodeInserted",n):"function"==typeof e&&t(document).bind("DOMNodeInserted",e)}}(jQuery),define("browserify",["require","exports","./_conf","./formSaver2","./jquery-saver","./main"],(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}));